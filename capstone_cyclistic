############# Merging All Yearly Datasets Together & Checking Data #############

## Installing and Attaching R Packages ##
install.packages(c("tidyverse", "janitor", "data.validator", "lubridate", "data.table", "plyr", "knitr","readr"))

library(tidyverse)
library(janitor)
library(data.validator)
library(ggplot2)
library(dplyr)
library(lubridate) 
library(data.table)
library(plyr)
library(stringr)
library(knitr)
library(tidyr)
library(readr)

# Set your working directory to where the CSV files are located
setwd("C:/Users/yourname/Desktop/UpdatedCode_MergedData")


# Get a list of all CSV files in the directory
csv_files <- list.files(pattern = ".csv")

# Read and combine all CSV files using dplyr::bind_rows()
prepare_3Yhistorical <- lapply(csv_files, function(x) read.csv(x, stringsAsFactors = FALSE, 
                                                       colClasses = c("start_station_id" = "character", "end_station_id" = "character"))) %>% 
  bind_rows()

# View the first few rows of the data
head(prepare_3Yhistorical)

# View summary statistics for the data
summary(prepare_3Yhistorical)

# View the last few rows of the data
tail(prepare_3Yhistorical)

# Save merged data as CSV
write.csv(prepare_3Yhistorical, file = "prepare_3Yhistorical", row.names = FALSE)

############# Prepare Phase of Data Analysis Process #############

# Installing Packages Needed for This Phase
install.packages("DataExplorer")
library(DataExplorer)

# Reviewing Data Types
str(prepare_cyclisticdata)

# Summarize Data & Save to text file
summary(prepare_cyclisticdata)
capture.output(summary(prepare_cyclisticdata), file="prepare_cyclisticdata.txt")


# Print summarise_all & save to text file
summarise_all(prepare_cyclisticdata)
capture.output(summarise_all(prepare_cyclisticdata), file="summarise_all.txt")

# Print prepare_cyclisticdata & save to text file
dim(prepare_cyclisticdata)
capture.output(dim(prepare_cyclisticdata), file="dimensions.txt")


create_report <- function(data) {
  kable(head(data))
}
create_report(prepare_cyclisticdata)

knit("data_prepare_check.Rmd", output="data_prepare_check.html")


